# Use RHEL UBI 9 base image
FROM registry.access.redhat.com/ubi9/ubi

# Set environment variables
ENV TOMCAT_VERSION=8.5.96
ENV TOMCAT_HOME=/opt/tomcat

# Install OpenJDK 8 and required tools
RUN dnf install -y java-1.8.0-openjdk curl tar && \
    curl -O https://archive.apache.org/dist/tomcat/tomcat-8/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz && \
    tar xzf apache-tomcat-${TOMCAT_VERSION}.tar.gz && \
    mv apache-tomcat-${TOMCAT_VERSION} ${TOMCAT_HOME} && \
    rm apache-tomcat-${TOMCAT_VERSION}.tar.gz

# Copy your WAR file into the Tomcat webapps directory
COPY your-app.war ${TOMCAT_HOME}/webapps/ROOT.war
# Expose Tomcat port
EXPOSE 8080

# Start Tomcat
CMD ["sh", "-c", "${TOMCAT_HOME}/bin/catalina.sh run"]
